# ItemLoader


## demo
```python
from scrapy.loader import ItemLoader
from myproject.items import Product
 
def parse(self, response):
    l = ItemLoader(item=Product(), response=response)
    l.add_xpath('name', '//div[@class="product_name"]')
    l.add_xpath('name', '//div[@class="product_title"]')
    l.add_xpath('price', '//p[@id="price"]',re='(\d+.?\d+)')
    l.add_css('stock', 'p#stock]')
    l.add_value('last_updated', 'today') # you can also use literal values
    return l.load_item()
```

??????item??? ????? Item????????????????????????????????????????????……??????????????????????????Item?????ItemLoader.default_item_class ??????Item ??Item Loader constructor?????
??????response??????????????

 add_xpath()?add_css()?and add_value() ????????????????????????getall????

## ItemLoader??

``` python
class ItemLoader(object):

    default_item_class = Item
    default_input_processor = Identity()
    default_output_processor = Identity()
    default_selector_class = Selector
```
## ???
?????input_processor??????output_processor

Field ??????????? 
??????????input_processor? ????item?title????????????????????????????
??????????output_processor? ? ???item?title???????????????????????

``` python
class scrapy.loader.processors.TakeFirst
class scrapy.loader.processors.Identity
class scrapy.loader.processors.Join
class scrapy.loader.processors.Compose
class scrapy.loader.processors.SelectJmes
```
#### Identity
``` python
# ??????
from scrapy.loader.processors import Identity

proc = Identity()

# ???????????????list
result = proc(['', 'one', 'two', 'three'])

# ???result = ['', 'one', 'two', 'three']
print(f"result = {result}")
```

#### compose
compose ????????????????????????????????????list????????list???????????????????????????????????????????????????????????
#### MapCompose




???????????????????????????????
	
loader = ItemLoader(item=Item())
header_loader = loader.nested_xpath('//header')
header_loader.add_xpath('social', 'a[@class = "social"]/@href')
header_loader.add_xpath('email', 'a[@class = "email"]/@href')
loader.load_item()
